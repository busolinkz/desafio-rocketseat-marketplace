@let products = (filteredProducts$ | async);

<h2 class="font-bold text-2xl leading-tight text-gray-900">Seus produtos</h2>
<h4 class="text-gray-400 text-sm leading-tight font-normal mt-2 mb-10">
  Acesse e gerencie a sua lista de produtos à venda
</h4>

<main class="grid grid-cols-3 gap-6 items-start">
  <div class="bg-white p-6 rounded-[20px]">
    <h4 class="text-gray-600 text-lg leading-tight font-bold">Filtrar</h4>

    <form class="mt-6" [formGroup]="filterForm" (ngSubmit)="filterProducts()">
      <div class="flex flex-col gap-2 border-b border-gray-400 pb-3">
        <div class="flex gap-2">
          <img src="search.svg" alt="" aria-hidden="true" />
          <label for="text" class="sr-only">Filtrar por título</label>
          <input
            type="text"
            id="text"
            placeholder="Pesquisar"
            class="outline-0 w-full text-gray-400"
            formControlName="title"
          />
        </div>
      </div>

      <div class="flex flex-col gap-2 border-b border-gray-400 pb-3 mb-10 mt-8">
        <div class="flex gap-2">
          <img src="sale-tag.svg" alt="" aria-hidden="true" />
          <label for="status" class="sr-only">Filtrar por status</label>
          <select
            title="Filtrar por status"
            class="w-full bg-white text-gray-400 py-2 focus:outline-none"
            formControlName="status"
            id="status"
          >
            <option value="" disabled selected hidden>Status</option>
            <option value="anunciado">Anunciado</option>
            <option value="vendido">Vendido</option>
            <option value="desativado">Desativado</option>
          </select>
        </div>
      </div>

      <button
        class="bg-[#F24D0D] w-full text-white px-5 py-4 rounded-[10px] cursor-pointer font-medium text-base"
        type="submit"
      >
        Aplicar filtro
      </button>

      <button
        type="button"
        (click)="clearFilter()"
        class="bg-[#0095E5] w-full text-white px-5 py-4 rounded-[10px] cursor-pointer font-medium text-base mt-5"
      >
        Limpar filtro
      </button>
    </form>
  </div>

  <section class="col-span-2 grid grid-cols-2 gap-4" aria-labelledby="products-list-section">
    <label id="products-list-section" class="sr-only">Lista de produtos</label>
    @for (product of products; track product.id) {
    <div class="bg-white rounded-2xl p-1 flex flex-col cursor-pointer">
      <div class="h-48 relative">
        <img
          class="rounded-2xl w-full h-48 object-cover"
          [src]="product.imageBase64"
          [alt]="'Imagem do produto:' + product.title"
        />
        <div class="flex justify-center gap-1 absolute top-4 right-4">
          <span
            class="bg-[#0095E5] p-2 rounded-2xl text-xs text-white capitalize"
            [class]="{
              'bg-[#0095E5]': product.status === 'anunciado',
              'bg-[#28A764]': product.status === 'vendido',
              'bg-[#666666]': product.status === 'desativado'
            }"
            >{{ product.status }}</span
          >
          <span class="bg-[#3D3D3D] p-2 rounded-2xl text-xs text-white">{{ product.category }}</span>
        </div>
      </div>
      <div class="flex justify-between p-3">
        <h3 class="font-bold text-gray-700">{{ product.title }}</h3>
        <h3 class="font-bold"><span class="text-xs font-medium">R$</span> {{ product.price }}</h3>
      </div>
      <div class="px-3 pb-3">
        <p class="text-gray-500 text-sm">
          {{ product.description }}
        </p>
      </div>
    </div>
    } @empty {
    <p class="font-bold text-gray-500">Nenhum item encontrado</p>
    }
  </section>
</main>
